'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _https = require('https');

var _https2 = _interopRequireDefault(_https);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/**
 * get - Makes a https get request
 *
 * @param {string} hostname A domain name
 * @param {string} path A request path
 * @param {Object} headers An object containing request headers
 * @return {Promise} p resolves with the https response
 */
function get(hostname, path, headers) {
  return new Promise(function (resolve, reject) {
    var options = {
      method: 'GET',
      hostname: hostname,
      path: path,
      headers: headers
    };
    var req = _https2.default.request(options, function (res) {
      if (res.statusCode < 200 || res.statusCode > 299) {
        reject(new Error('Failed with status code: ' + res.statusCode));
      }
      var chunks = [];
      res.on('data', function (chunk) {
        return chunks.push(chunk);
      });
      res.on('end', function () {
        return resolve(JSON.parse(Buffer.concat(chunks)));
      });
    });
    req.on('error', function (err) {
      return reject(err);
    });
    req.end();
  });
}

exports.default = { get: get };
module.exports = exports['default'];